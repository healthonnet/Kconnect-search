<div class="row">
  <div class="col-sm-9 col-xs-11 col-xs-offset-1 top-search">
    <div class="row">
      <form ng-submit="submit()">
        <div class="input-group stylish-input-group col-xs-12">
          <div class="jigsaw jigsaw-small bg-info col-xs-4" style="z-index: 3">
            <input type="text" ng-model="form.subject" ng-model-options="{debounce: 250}"
                   typeahead-editable="false" typeahead-min-length="0"
                   uib-typeahead="subject as subject.label for subject in getSubjects($viewValue)"
                   typeahead-on-select="validateQuery($item)" onfocus="this.select();"
                   class="bg-info" placeholder="{{ 'SEARCH_MEDICAL_TERMS' | translate }}">
          </div>
          <div class="jigsaw jigsaw-small col-xs-3" ng-if="form.subject" style="z-index: 2">
            <input type="text" ng-model="form.predicate" ng-model-options="{debounce: 250}"
                   typeahead-editable="false" typeahead-min-length="0"
                   uib-typeahead="predicate as predicate.label for predicate in getPredicates($viewValue)"
                   typeahead-on-select="validateQuery($item)" onfocus="this.select();"
                   placeholder="{{ 'SEARCH_MEDICAL_TERMS' | translate }}">
          </div>
          <div class="jigsaw jigsaw-small bg-info col-xs-4 col-sm-5" ng-if="form.predicate" style="z-index: 1">
            <input type="text" ng-model="form.object" ng-model-options="{debounce: 250}"
                   typeahead-editable="false" typeahead-min-length="0"
                   uib-typeahead="object as object.label for object in getObjects($viewValue)"
                   typeahead-on-select="validateQuery($item)" onfocus="this.select();"
                   class="bg-info" placeholder="{{ 'SEARCH_MEDICAL_TERMS' | translate }}">
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="row col-sm-11 col-xs-11 col-xs-offset-1">
  <ng-include src="fathead.type"></ng-include>

  <div class="row">
    <div class="col-md-6 results">
      <div class="row card" ng-repeat="link in results.groups track by $index" ng-mouseover="showScreenshot($index)" ng-class="{false: 'highlight'}[highlight == $index]">
        <div class="col-xs-12">
          <h2>
            <div ng-click="kConfig.translatedResults = !kConfig.translatedResults" ng-if="targetLang" class="btn btn-default translation-btn inline noselect">
                <span ng-class="kConfig.translatedResults?'flag-behind':'flag-above'" class="flag flag-{{ languages[targetLang].flag }}"></span>
                <span ng-class="kConfig.translatedResults?'flag-above':'flag-behind'" class="flag flag-{{ lang.flag }}"></span>
            </div>
            <img ng-src="{{ link.doclist.docs[0].url | favicon }}" class="noselect" alt="favicon" title="{{ link.doclist.docs[0].title }}">
            <a ng-hide="(kConfig.translatedResults && link.doclist.docs[0].translatedTitle)" href="{{ link.doclist.docs[0].url }}">
              {{link.doclist.docs[0].title | cut:true:40:' ...'}}
            </a>
            <a ng-show="(kConfig.translatedResults && link.doclist.docs[0].translatedTitle)"
               href="http://translate.google.com/translate?hl={{lang.key}}&sl={{targetLang}}&tl={{lang.key}}&u={{link.doclist.docs[0].url}}" >
              {{link.doclist.docs[0].translatedTitle | cut:true:40:' ...'}}
            </a>
            <div class="visible-sm-inline-block visible-xs-inline-block">
              <img src="images/honcode.png" ng-if="link.doclist.docs[0].certified" alt="{{ 'HONCODE_CERTIFIED' | translate}}" title="{{ 'HONCODE_CERTIFIED' | translate}}">
              <span class="m-trust" ng-show="link.doclist.docs[0].trustability">
                <i class="fa fa-stethoscope" aria-hidden="true" style="color: {{getColor(link.doclist.docs[0].trustability)}}"></i>
              </span>
              <span class="m-read" ng-show="link.doclist.docs[0].readability">
                <i class="fa fa-book" aria-hidden="true" style="color: {{getColor(link.doclist.docs[0].readability)}}"></i>
              </span>
            </div>
          </h2>
          <p>
            <a href="{{ link.doclist.docs[0].url }}" class="text-overflow inline-block" ng-bind-html="link.doclist.docs[0].url | spanWord:highlight"></a>
            <a href="https://provisu.ch/service?url={{link.doclist.docs[0].url}}" target="_blank" class="pull-right" ng-if="lowVision"><i class="fa fa-2x fa-low-vision" aria-hidden="true"></i></a>
          </p>
          <p ng-hide="(kConfig.translatedResults && link.doclist.docs[0].translatedTitle)"
             ng-bind-html="link.doclist.docs[0].snippet | cut:true:70:' ...'| spanWord:highlight">
          </p>
          <p ng-show="(kConfig.translatedResults && link.doclist.docs[0].translatedTitle)"
             ng-bind-html="link.doclist.docs[0].translatedSnippet | cut:true:70:' ...'| spanWord:translatedHighlight">
          </p>
        </div>
      </div>
    </div>
    <div class="col-md-6 search-details hidden-sm card" sticky confine="true" sticky-class="sticky-card" ng-class="{false: 'highlight'}[highlight >= 0]" ng-include="'views/partials/screenshot.html'" ng-if="!lowVision">
    </div>
  </div>

  <div class="row card">
    <ul uib-pagination total-items="results.nbPages" ng-model="results.currentPage" max-size="results.maxSize" class="pagination-sm" boundary-link-numbers="true" rotate="false" ng-change="changePage()"></ul>
  </div>

</div>
